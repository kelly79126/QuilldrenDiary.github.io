<html lang="zh-TW">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no">
	<title>Quilldren Diary</title>
	
	<script type="text/javascript" src="https://code.jquery.com/jquery-3.3.1.min.js"></script><!--這個一定要放第一個js-->
	<script src="js_PC.js"></script>
	<script src="js_Phone.js"></script>
	<script src="page.js"></script>
	<script src="magnific-popup.js"></script>
	<script src="require.js"></script><!--這個一定要放最後一個js，不然會有引入錯誤-->

	<link rel="stylesheet" type="text/css" href="css_PC.css">
	<link rel="stylesheet" type="text/css" href="css_Phone.css">
	<link rel="stylesheet" type="text/css" href="page.css">
	<link rel="stylesheet" type="text/css" href="magnific-popup.css">

	<link rel="preconnect" href="https://fonts.googleapis.com">
	<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
	<link href="https://fonts.googleapis.com/css2?family=Noto+Serif+TC&display=swap" rel="stylesheet">

<body>
	<!--Loading頁面-->
	<div id="loading">
		<div id="loading_text">Loading</div>
		<div id="running_quilldren"></div>
	</div>

	<!--桌面-->
	<a class="popup-ink"  >
		<div id="ink" class="icon"></div>
	</a>

	<a href="https://twitter.com/quilldren_tw" target="_blank">
		<div id="twitter" class="icon">		
			<div id="twitter2"></div>
		</div>
	</a>
	<a href="https://www.plurk.com/quilldren_diary" target="_blank">
		<div id="pen" class="icon">
			<div id="pen2"></div>
		</div>
	</a>
	<div id="earringsL" class="icon" onclick="previous()"></div>
	<!--書開頭-->
	<div id="book" class="icon">
		<div id="book2">
		
		</div>
	</div>
	<!--書結尾-->
	<div id="earringsR" class="icon" onclick="next()"></div>
	
	<a class="popup-youtube" href="https://www.youtube.com/embed/-ihVBrPB1fc">
		<div id="pad" class="icon">
			<div id="pad2"></div>
		</div>
	</a>
	<div id="quilldren"></div>
	<a class="popup-cup"  >
		<div id="cup" class="icon"></div>
	</a>
	<div id="toast"></div>
</body>
</html>
<script>
	/*加上換場*/
	$('#book').click(changeScene);

	/*生成書的內頁*/
	create_page(4);//內頁頁數
	insert_page_type1L(1,'pic1.png','pic2.png','pic3.png','name1','name2','name3','text1','text2','text3','stc1','stc2');
	insert_page_type1R(2,'pic1.png','pic2.png','pic3.png','name1','name2','name3','text1','text2','text3','stc1','stc2');
	insert_page_type2L(3,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');
	insert_page_type2R(4,'pic1.png','pic2.png','pic3.png','pic4.png','pic5.png','test1','test2','test3','test4','test5');


	var i = 0;/*計算頁數*/
	
	/*RWD設定offset*/
	$(document).ready(function(){
		setOffset();
	});
	$(document).ready(function(){
		$(window).resize(function() {
			setOffset();
		});
	});

	/*預先載入頁面*/
	window.onload = function() {	
		$('#loading').css("transition", "0.5s"); 
		$('#loading').css("opacity", "0"); 
		$('#running_quilldren').css("transition", "0.5s"); 
		$('#running_quilldren').css("opacity", "0"); 
		$('body').css("transition", "0.5s"); 

		
		setTimeout(
			function() {
				$('#loading').remove();
				$('#running_quilldren').remove();
		}, 500);
	};
	
	/*預先載入後面會用到的圖片*/
	var preloaded = 0;
	var images = new Array(
		"img/Pad-phone.png",
		"img/Pen-phone.png",
		"img/Twitter-phone.png",
		"img/Quildren-page.png",
		"img/Quildren-phone.png",
		"img/book-bgL.png",
		"img/book-bgR.png",
		"img/book-phone.png");
	function preLoader(e) {
		for (var i = 0; i < images.length; i++) {
			var tempImage = new Image();
			
			tempImage.addEventListener("load", progress, true);
			tempImage.src = images[i];
		}
	}
	function progress() {
		preloaded++;
		
		if (preloaded == images.length) {
			/*預留，看之後要不要弄讀取條*/
		}
	}
	this.addEventListener("DOMContentLoaded", preLoader, true);


	/*從桌面切換到看書的畫面*/
	function changeScene(){
		if(i==0){		
			if ($(window).width() > 480) {
				change_scene_PC();
			}else{
				change_scene_phone();
			}
		}
	}

	/*上一頁*/
	function previous(){
		if ($(window).width() > 480) {
			previous_PC();
		}else{
			previous_phone();
		}
	}
	/*下一頁*/
	function next(){
		if ($(window).width() > 480) {
			next_PC();
		}else{
			next_phone();
		}
	}

	/*Youtube*/
	$('.popup-youtube').magnificPopup({
		type: 'iframe',
		iframe: {
		markup: '<div class="mfp-iframe-scaler">'+
				'<div class="mfp-close"></div>'+
				'<iframe width="100%" height="100%" '+
				'src="'+ $('.popup-youtube').attr('href') +'" title="YouTube video player" frameborder="0" '+
				'allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" '+
				'allowfullscreen></iframe>'+
				'</div>'
		}
	});

	$('.popup-ink').magnificPopup({
		items: {
			src: `<div class="white-popup" style="width: 450px; height: 600px; padding: 0px 5px; background: url(./img/credits-bg.png); background-size: contain; background-repeat: no-repeat;">
				  <div style="width: 410px; height: 580px; overflow: auto; padding-left:30px">
				  		<img src="./img/credits.png" style="width: 410px; height: auto;" />
				  </div>
				</div>`,
			type: 'inline' // this is default type
		},
		closeMarkup: '<button title="%title%" type="button" class="mfp-close" style="top: -50px;"><img src="./img/close.png" style="width:50px; height:auto; pointer-events:none;"></button>',
	});

	$('.popup-cup').magnificPopup({
		items: {
			src: `<div class="white-popup" style="width: 600px; height: 800px; padding: 0px 10px; background: url(./img/credits-bg.png); background-size: contain; background-repeat: no-repeat;">
				  <div style="width: 550px; height: 780px; overflow: auto; padding-left:30px">
				  	<img src="./img/credits.png" style="width: 550px; height: auto;" />
				  </div>
				</div>`,
			type: 'inline'
		},
		closeMarkup: '<button title="%title%" type="button" class="mfp-close" style="top: -50px; right: -20px"><img src="./img/close2.png" style="width:50px; height:auto; pointer-events:none;"></button>',
	});
</script>